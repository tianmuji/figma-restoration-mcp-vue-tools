# Threshold固定0.02 - 严格还原度要求

## 问题描述
在Figma组件还原中，threshold参数被固定为0.02，这是一个非常严格的要求，要求98%以上的还原度。

## 严格标准的影响

### 1. 还原度要求
- **阈值**: 0.02 (固定)
- **目标还原度**: ≥ 98%
- **实际效果**: 对像素级差异极其敏感

### 2. DesignV1组件案例
- **初始还原度**: 87.75%
- **优化后还原度**: 87.75% (仍低于98%)
- **差异像素**: 60,014 / 490,050
- **状态**: 未达到98%目标

## 严格标准下的挑战

### 1. 文本渲染差异
- **字体抗锯齿**: 不同浏览器的字体渲染差异
- **子像素渲染**: 文本边缘的像素级差异
- **字体平滑度**: 字体渲染算法的差异

### 2. 边框处理精度
- **边框宽度**: 1-2px的边框处理差异
- **盒模型计算**: Figma和Web的盒模型差异
- **边框颜色**: 边框颜色的精确匹配

### 3. 布局精度
- **间距计算**: gap和padding的像素级精度
- **元素定位**: 绝对定位的精确性
- **尺寸匹配**: 元素尺寸的完全一致

## 优化策略

### 1. 精确尺寸匹配
```css
/* 必须完全匹配Figma尺寸 */
.component {
  width: 194px;  /* 精确匹配 */
  height: 271px; /* 精确匹配 */
  border: 2px solid #000000;
  box-sizing: border-box;
}
```

### 2. 文本样式精确匹配
```css
.text {
  font-family: Inter, sans-serif;
  font-size: 12px;
  font-weight: 400;
  line-height: 1.2102272510528564em;
  text-align: left;
  vertical-align: top;
}
```

### 3. 布局精确匹配
```css
.layout {
  display: flex;
  flex-direction: column;
  gap: 12px;  /* 精确间距 */
  padding: 16px; /* 精确内边距 */
}
```

## 经验总结

### 1. 严格标准的意义
- **质量保证**: 确保还原质量达到专业标准
- **一致性**: 保证与Figma设计的完全一致
- **可靠性**: 提供可靠的组件还原结果

### 2. 实现挑战
- **像素级精度**: 需要像素级的精确匹配
- **细节处理**: 每个细节都不能忽略
- **持续优化**: 需要不断调整直到达到标准

### 3. 最佳实践
- **逐步优化**: 从结构到样式逐步优化
- **细节检查**: 检查每个元素的尺寸和位置
- **对比验证**: 通过对比工具验证还原度

## 注意事项

1. **阈值固定**: threshold必须固定为0.02
2. **目标明确**: 还原度必须达到98%以上
3. **持续优化**: 未达到目标时需要继续优化
4. **经验积累**: 记录每次优化的经验

## 相关文档
- [边框盒模型差异-Figma与Web尺寸计算.md](./边框盒模型差异-Figma与Web尺寸计算.md)
- [文本渲染差异-pixelMatch阈值优化策略.md](./文本渲染差异-pixelMatch阈值优化策略.md)

## 标签
`#threshold` `#严格标准` `#还原度要求` `#像素级精度` `#质量保证` 